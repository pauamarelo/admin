"use strict";var app=angular.module("myApp",["ui.router","ui.mask","ui.bootstrap","ngAnimate","ngSanitize","ngTouch","toaster","textAngular","angularUtils.directives.dirPagination","oc.lazyLoad"]);
"use strict";var app=angular.module("myApp");app.config(function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("inicio",{url:"/",templateUrl:"views/home.html",controller:"homeCtrl",controllerAs:"vm"}).state("noticias",{url:"/noticias",templateUrl:"views/noticias.html",controller:"noticiasCtrl",controllerAs:"vm"}).state("perfil",{url:"/perfil",templateUrl:"views/perfil.html",controller:"perfilCtrl",controllerAs:"vm",resolve:{loadMyFactory:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load("js/factories/authFactory.js")}]}}).state("integrantes",{url:"/integrantes",templateUrl:"views/integrantes.html",controller:"integrantesCtrl",controllerAs:"vm"}).state("galeria",{url:"/galeria",templateUrl:"views/galeria.html",controller:"galeriaCtrl",controllerAs:"vm"}),$locationProvider.html5Mode(!0)});
"use strict";!function(){var api="https://pauamarelo.herokuapp.com/api/",oapi="https://pauamarelo.herokuapp.com/oapi/";angular.module("myApp").constant("config",{userKey:"_nodejs_mongodb",listNews:oapi+"news",news:api+"news",upload:api+"upload",login:oapi+"login",signup:oapi+"signup",validateToken:oapi+"validateToken",admins:api+"admins",adminSenha:api+"adminSenha",listarIntegrantes:oapi+"integrantes",integrantes:api+"integrantes",listarGaleria:oapi+"galeria",galeria:api+"galeria"})}();
"use strict";angular.module("myApp").controller("galeriaCtrl",function($scope,$http,config,toaster){var vm=this;function listar(){vm.isLoading=!0,$http.get(config.listarGaleria).then(function(response){response.data.status&&(vm.res=response.data,vm.galeria=response.data.data,vm.isLoading=!1)})}vm.dados={},vm.img={},vm.isLoading=!1,vm.imgIsLoading=!1,vm.isPostLoading=!1,vm.orderByField="-createdAt",vm.reverseSort=!1,vm.pageSize="12",vm.pagination={current:1},vm.scrollTop=function(){$("html, body").animate({scrollTop:$(".bloco").offset().top-80},200)},$http.get(config.listarIntegrantes).then(function(response){vm.integrantes=response.data.data}),listar(),vm.openAdd=function(){vm.dados={},$("#modalAdd").modal("show")},vm.adicionar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem="";var objData={foto:vm.imagem,legenda:d.legenda,integrante:d.integrante};$http.post(config.galeria,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$("#modalAdd").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.openEdit=function(d){vm.dados=d,vm.img={},$("#modalEdit").modal("show")},vm.editar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem=d.foto;var objData={foto:vm.imagem,legenda:d.legenda,integrante:d.integrante};$http.put(config.galeria+"/"+d._id,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$(".modal").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.ativo=function(post){post.ativo?post.ativo=0:post.ativo=1,vm.editar(post)},vm.delete=function(d){confirm("Você realmente deseja excluir este registro?")&&$http.delete(config.galeria+"/"+d._id).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar()):toaster.error("Erro","Houve um erro.")})},vm.upload=function(d){vm.imgIsLoading=!0;var file=d,fd=new FormData;fd.append("imagem",file),$http.post(config.upload,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),vm.img=response.data):toaster.error("Erro",response.data.msg),vm.imgIsLoading=!1}).catch(function(error){toaster.error("Erro","Houve um erro"),vm.imgIsLoading=!1})},vm.detalhes=function(d){vm.dados=d,$("#modalDetalhes").modal("show")}});
"use strict";angular.module("myApp").controller("headerCtrl",function($scope,$http){this.status={isCollapsed:!0}});
"use strict";angular.module("myApp").controller("homeCtrl",function($scope,$http){this.msg="oiiii"});
"use strict";angular.module("myApp").controller("integrantesCtrl",function($scope,$http,config,toaster){var vm=this;function listar(){vm.isLoading=!0,$http.get(config.listarIntegrantes).then(function(response){response.data.status&&(vm.res=response.data,vm.integrantes=response.data.data,vm.isLoading=!1)})}vm.dados={},vm.img={},vm.isLoading=!1,vm.imgIsLoading=!1,vm.isPostLoading=!1,vm.orderByField="-createdAt",vm.reverseSort=!1,vm.pageSize="10",vm.pagination={current:1},listar(),vm.openAdd=function(){vm.dados={},$("#modalAdd").modal("show")},vm.adicionar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem="";var objData={nome:d.nome,sobrenome:d.sobrenome,nick:d.nick,curiosidades:d.curiosidades,steam:d.steam,foto:vm.imagem};$http.post(config.integrantes,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$("#modalAdd").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.openEdit=function(d){vm.dados=d,vm.img={},$("#modalEdit").modal("show")},vm.editar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem=d.foto;var objData={nome:d.nome,sobrenome:d.sobrenome,nick:d.nick,sobre:{funcao:d.sobre.funcao,mapa:d.sobre.mapa,armas:d.sobre.armas,amigao:d.sobre.amigao,caracteristicas:d.sobre.caracteristicas,carreira:d.sobre.carreira,patente:d.sobre.patente},config:{mouse:d.config.mouse,pad:d.config.pad,headset:d.config.headset,keyboard:d.config.keyboard,screen:d.config.screen},curiosidades:d.curiosidades,steam:d.steam,foto:vm.imagem,ativo:d.ativo};$http.put(config.integrantes+"/"+d._id,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$(".modal").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.ativo=function(post){post.ativo?post.ativo=0:post.ativo=1,vm.editar(post)},vm.delete=function(d){confirm("Você realmente deseja excluir este registro?")&&$http.delete(config.integrantes+"/"+d._id).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar()):toaster.error("Erro","Houve um erro.")})},vm.upload=function(d){vm.imgIsLoading=!0;var file=d,fd=new FormData;fd.append("imagem",file),$http.post(config.upload,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),vm.img=response.data):toaster.error("Erro",response.data.msg),vm.imgIsLoading=!1}).catch(function(error){toaster.error("Erro","Houve um erro"),vm.imgIsLoading=!1})},vm.openSobre=function(d){vm.dados=d,$("#modalSobre").modal("show")},vm.openConfig=function(d){vm.dados=d,$("#modalConfig").modal("show")}});
"use strict";angular.module("myApp").controller("loginCtrl",function($rootScope,$http,config,toaster,auth,$timeout,$window){var vm=this;vm.isLogin=!0,vm.logar=function(d){auth.login(d,function(err){err?toaster.error("Erro",err[0]):(toaster.success("Sucesso!","Login efetuado com sucesso."),$rootScope.logado=!0)})},vm.cadastrar=function(d){$http.post(config.signup,d).then(function(response){console.log(response.data),toaster.success("Sucesso!",response.data),vm.dados={},$timeout(function(){$window.location.reload()},6e3)}).catch(function(response){toaster.error("Erro",response.data.errors[0])})}});
"use strict";angular.module("myApp").controller("noticiasCtrl",function($scope,$http,config,toaster,auth){var vm=this,user=auth.getUser();function regx(val){return(val=(val=(val=(val=(val=(val=(val=(val=(val=(val=(val=(val=(val=val.replace(/[áàãâä]/g,"a")).replace(/[ÁÀÃÂÄ]/g,"a")).replace(/[éèêë]/g,"e")).replace(/[ÉÈÊË]/g,"e")).replace(/[íìîï]/g,"i")).replace(/[ÍÌÎÏ]/g,"i")).replace(/[óòõôö]/g,"o")).replace(/[ÓÒÕÔÖ]/g,"o")).replace(/[úùûü]/g,"u")).replace(/[ÚÙÛÜ]/g,"u")).replace(/[ç]/g,"c")).replace(/[Ç]/g,"c")).replace(/\W+/g,"-")).toLowerCase()}function listarAdmins(){$http.get(config.admins).then(function(response){vm.admins=response.data.data})}function listar(){vm.isLoading=!0,$http.get(config.listNews).then(function(response){response.data.status&&(vm.res=response.data,vm.news=response.data.data,vm.isLoading=!1)}).catch(function(error){vm.res=error.data,vm.isLoading=!1})}vm.dados={},vm.img={},vm.isLoading=!1,vm.imgIsLoading=!1,vm.isPostLoading=!1,vm.fullName=user.nome+' "'+user.login+'" '+user.sobrenome,vm.orderByField="-createdAt",vm.reverseSort=!1,vm.pageSize="10",vm.pagination={current:1},listar(),vm.openAdd=function(){vm.dados={},$("#modalAdd").modal("show"),listarAdmins()},vm.adicionar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem="";var objData={titulo:d.titulo,conteudo:d.conteudo,autor:d.autor,url:regx(d.titulo),img:vm.imagem,ativo:d.ativo};$http.post(config.news,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$("#modalAdd").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.openEdit=function(d){vm.dados=d,vm.img={},$("#modalEdit").modal("show"),listarAdmins()},vm.editar=function(d){vm.isPostLoading=!0,d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem=d.img;var objData={titulo:d.titulo,conteudo:d.conteudo,autor:d.autor,url:regx(d.titulo),img:vm.imagem,ativo:d.ativo};$http.put(config.news+"/"+d._id,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar(),$("#modalEdit").modal("hide")):toaster.error("Erro","Houve um erro."),vm.isPostLoading=!1})},vm.ativo=function(post){post.ativo?post.ativo=0:post.ativo=1,vm.editar(post)},vm.delete=function(d){confirm("Você realmente deseja excluir este registro?")&&$http.delete(config.news+"/"+d._id).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),listar()):toaster.error("Erro","Houve um erro.")})},vm.upload=function(d){vm.imgIsLoading=!0;var file=d,fd=new FormData;fd.append("imagem",file),$http.post(config.upload,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),vm.img=response.data):toaster.error("Erro",response.data.msg),vm.imgIsLoading=!1}).catch(function(error){toaster.error("Erro","Houve um erro"),vm.imgIsLoading=!1})},vm.detalhes=function(d){vm.dados=d,$("#modalDetalhes").modal("show")}});
"use strict";angular.module("myApp").controller("perfilCtrl",function($scope,$rootScope,$http,config,toaster,auth,$window){var vm=this;vm.dados=$rootScope.user,vm.imgIsLoading=!1,vm.editar=function(d){d.imagem?vm.imagem=vm.img.data.filePath:vm.imagem=d.foto;var objData={nome:d.nome,sobrenome:d.sobrenome,login:d.login,styles:{header:d.styles.header,background:d.styles.background,sidebar:d.styles.sidebar,headerLetters:d.styles.headerLetters,backgroundLetters:d.styles.backgroundLetters,sidebarLetters:d.styles.sidebarLetters},foto:vm.imagem};confirm("Salvar as alterações fará com que você seja desconectado, deseja salvar?")&&$http.put(config.admins+"/"+vm.dados._id,objData).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),auth.logout()):toaster.error("Erro",response.data.msg)})},vm.upload=function(d){vm.imgIsLoading=!0;var file=d,fd=new FormData;fd.append("imagem",file),$http.post(config.upload,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(response){response.data.status?(toaster.success("Sucesso!",response.data.msg),vm.img=response.data):toaster.error("Erro",response.data.msg),vm.imgIsLoading=!1}).catch(function(error){toaster.error("Erro","Houve um erro"),vm.imgIsLoading=!1})},vm.openModalSenha=function(){$("#modalSenha").modal("show")},vm.editarSenha=function(d){var objData={senha:d.senha,confirmarSenha:d.confirmarSenha};confirm("Salvar as alterações fará com que você seja desconectado, deseja salvar?")&&$http.put(config.adminSenha+"/"+vm.dados._id,objData).then(function(response){toaster.success("Sucesso!",response.data.msg),auth.logout()}).catch(function(response){toaster.error("Erro",response.data.errors[0])})}});
"use strict";app.directive("fileModel",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){var modelSetter=$parse(attrs.fileModel).assign;element.bind("change",function(){scope.$apply(function(){modelSetter(scope,element[0].files[0])})})}}}]);
"use strict";angular.module("myApp").factory("auth",["$http","config","$window",function($http,config,$window){var user=null;function submit(url,user,callback){$http.post(url,user).then(function(response){localStorage.setItem(config.userKey,JSON.stringify(response.data)),$window.location.reload(),$http.defaults.headers.common.Authorization=response.data.token,callback&&callback(null,response.data)}).catch(function(response){callback&&callback(response.data.errors,null)})}function logout(callback){user=null,localStorage.removeItem(config.userKey),$http.defaults.headers.common.Authorization="",$window.location.reload(),location.href="/admin",callback&&callback(null)}function getUser(){return user=user||JSON.parse(localStorage.getItem(config.userKey))}return{signup:function(user,callback){submit(config.signup,user,callback)},login:function(user,callback){submit(config.login,user,callback)},logout:logout,getUser:getUser,validateToken:function(token,callback){token?$http.post(config.validateToken,{token:token}).then(function(response){response.data.valid?$http.defaults.headers.common.Authorization=getUser().token:logout(),callback&&callback(null,response.data.valid)}).catch(function(response){callback&&callback(response.data.errors)}):callback&&callback("Token inválido.")}}}]);
"use strict";angular.module("myApp").filter("limite",function(){return function(input){return input.length<=65?input:input.substring(0,65)+"..."}});
"use strict";angular.module("myApp").run(function($rootScope,$http,$transitions,$window,auth){function validateUser(){var user=auth.getUser();user?user&&!user.isValid&&auth.validateToken(user.token,function(err,valid){valid?(user.isValid=!0,$http.defaults.headers.common.Authorization=user.token,$rootScope.logado=!0,$rootScope.user=auth.getUser()):$rootScope.logado=!1}):$rootScope.logado=!1}validateUser(),$rootScope.$on("$locationChangeStart",function(){return validateUser()}),$rootScope.logout=function(){$rootScope.logado=!1,auth.logout()};var mobileScreen=$(window).width()<768;$transitions.onEnter({},function(){document.body.scrollTop=document.documentElement.scrollTop=0,$("body").addClass("animated fadeIn")}),$transitions.onExit({},function(){$("body").removeClass("animated fadeIn")}),mobileScreen?($rootScope.sidebarCollapsed=!0,$transitions.onEnter({},function(){$rootScope.sidebarCollapsed=!0})):$rootScope.sidebarCollapsed=!1,$rootScope.sidebarCollapse=function(){$rootScope.sidebarCollapsed=!$rootScope.sidebarCollapsed}});